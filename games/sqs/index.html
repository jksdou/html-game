<html>

<head lang="zh">
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, maximum-scale=0.5" />
    <title>游戏中心</title>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/easeljs-0.7.1.min.js"></script>
    <script type="text/javascript" src="js/tweenjs-0.5.1.min.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/jquery.cookie.js"></script>
    <style>
        body {
            background-color: black;
            margin: 0;
        }
    </style>
</head>

<body onLoad="init()">
    <canvas id="canvas"></canvas>
    <script language=javascript>
        var mebtnopenurl = 'http://uinote.com/html-game';
        window.shareData = {
            "imgUrl": "http://uinote.com/html-game/icon/sqs.png",
            "timeLineLink": "http://uinote.com/html-game/games/sqs",
            "tTitle": "神枪手-游戏中心",
            "tContent": "瞄准后发射，看你能打中几环，考验你的眼明手快！"
        };

        function goHome() {
            window.location = mebtnopenurl;
        }

        function clickMore() {
            if ((window.location + "").indexOf("zf", 1) > 0) {
                window.location = "http://uinote.com/html-game/games/sqs";
            } else {
                goHome();
            }
        }

        function dp_share() {
            document.title = "我是神枪手" + myData.scoreName + "，最吊的一发命中了" + myData.maxscore + "环！射的感觉爽爆了！";
            document.getElementById("share").style.display = "";
            window.shareData.tTitle = document.title;
        }

        function dp_Ranking() {
            window.location = mebtnopenurl;
        }

        function showAd() {}

        function hideAd() {}
        document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {

            WeixinJSBridge.on('menu:share:appmessage', function (argv) {
                WeixinJSBridge.invoke('sendAppMessage', {
                    "img_url": window.shareData.imgUrl,
                    "link": window.shareData.timeLineLink,
                    "desc": window.shareData.tContent,
                    "title": window.shareData.tTitle
                }, onShareComplete);
            });

            WeixinJSBridge.on('menu:share:timeline', function (argv) {
                WeixinJSBridge.invoke('shareTimeline', {
                    "img_url": window.shareData.imgUrl,
                    "img_width": "640",
                    "img_height": "640",
                    "link": window.shareData.timeLineLink,
                    "desc": window.shareData.tContent,
                    "title": window.shareData.tTitle
                }, onShareComplete);
            });
        }, false);
    </script>
    <div id=share style="display: none">
        <img width=100% src="share.png" style="position: fixed; z-index: 9999; top: 0; left: 0; display: block;"
            ontouchstart="document.getElementById('share').style.display='none';" />
    </div>
    <div style="display: none;">
        <script type="text/javascript">
            var myData = {
                gameid: "sqs"
            };
            var domain = ["oixm.cn", "hiemma.cn", "peagame.net"][parseInt(Math.random() * 3)];
            window.shareData.timeLineLink = "http://uinote.com/html-game/";

            function dp_submitScore(score, maxscore) {
                myData.score = parseInt(score * 100);
                myData.maxscore = maxscore;
                myData.scoreName = "打出" + score + "环";
                if (score > 0) {
                    if (confirm("你不错哟，竟然命中" + score + "环，快告诉你的小伙伴们吧！")) {
                        dp_share();
                    }
                }
            }

            function onShareComplete(res) {
                if (localStorage.myuid && myData.score != undefined) {
                    setTimeout(function () {
                        if (confirm("要将成绩提交到游戏中心排行榜吗？")) {
                            window.location = "http://uinote.com/html-game/" + myData.gameid + "&uid=" +
                                localStorage.myuid + "&score=" + myData.score + "&scorename=" +
                                encodeURIComponent(myData.scoreName);
                        } else {
                            document.location.href = mebtnopenurl;
                        }
                    }, 500);
                } else {
                    document.location.href = mebtnopenurl;
                }
            }
        </script>
</body>

</html>